##
# Terminal Colores
##
greenColour="\e[0;32m\033[1m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"
endColour="\033[0m\e[0m"

function log_error() {
    printf "[${redColour}✘${endColour}] $@\n"
}

function log_warning() {
    printf "[${yellowColour}⚠${endColour}] $@\n"
}

function log_ok() {
    printf "[${greenColour}✓${endColour}] $@\n"
}

function log_info() {
    printf "[${blueColour}i${endColour}] $@\n"
}

# This function will help standardize running a command
function run_cmd () {
    /bin/bash -c "$1" 2>/dev/null
}

# make dir
function make_DirTool(){
    TOOL_NAME=$1
    TOOL_PATH="$(pwd)/Pentest_${NAME}/${TOOL_NAME}"
    if [ ! -d "${TOOL_PATH}" ]; then
        log_ok "Creating  dir ${TOOL_PATH}/"
        run_cmd "mkdir ${TOOL_PATH}"
    fi
}

function isPackageInstalled() {
    local package=$1
    dpkg -l | grep -q $package
    return $?
}

function init_folder(){
    itsnew=0
    if [ ! -d "Pentest_${NAME}/" ]; then
        log_info "Creating  dir Pentest_${NAME}/"
        run_cmd "mkdir Pentest_${NAME}/"
        itsnew=1
    fi

    if [[ ! -f "Pentest_${NAME}/targets/domains.txt" ]]
    then
        echo -e "${greenColour}[+]${endColour} Creating Pentest_${NAME}/targets/domains.txt"
        run_cmd "touch Pentest_${NAME}/targets/domains.txt"
        itsnew=1
    fi

    if [[ ! -f "Pentest_${NAME}/targets/subdomains.txt" ]]
    then
        echo -e "${greenColour}[+]${endColour} Creating Pentest_${NAME}/targets/subdomains.txt"
        run_cmd "touch Pentest_${NAME}/targets/subdomains.txt"
        itsnew=1
    fi

    if [[ ! -f "Pentest_${NAME}/targets/ipaddresses.txt" ]]
    then
        echo -e "${greenColour}[+]${endColour} Creating Pentest_${NAME}/targets/ipaddresses.txt"
        run_cmd "touch Pentest_${NAME}/targets/ipaddresses.txt"
        itsnew=1
    fi

    if [[ ! -f "Pentest_${NAME}/targets/urls.txt" ]]
    then
        echo -e "${greenColour}[+]${endColour} Creating Pentest_${NAME}/targets/urls.txt"
        run_cmd "touch Pentest_${NAME}/targets/urls.txt"
        itsnew=1
    fi

    run_cmd "chown -R 1000:1000 Pentest_${NAME}/"
    if [ $itsnew -eq 1 ];then
        echo -e "\n${blueColour}[i]${endColour} Please add ${greenColour}Targets${endColour} to the created files to continue"
        read -r -s -p $'Press enter to continue...'
    fi
}